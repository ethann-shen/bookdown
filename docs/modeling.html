<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Modeling | Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data</title>
  <meta name="description" content="Chapter 4 Modeling | Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Modeling | Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Modeling | Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data" />
  
  
  

<meta name="author" content="Ethan Shen" />


<meta name="date" content="2021-04-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pace-of-play-metrics.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Abstract</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a><ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#processing-the-data"><i class="fa fa-check"></i><b>2.1</b> Processing the Data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html"><i class="fa fa-check"></i><b>3</b> Pace-of-Play Metrics</a><ul>
<li class="chapter" data-level="3.1" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#framework"><i class="fa fa-check"></i><b>3.1</b> Framework</a><ul>
<li class="chapter" data-level="3.1.1" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#possession-sequences"><i class="fa fa-check"></i><b>3.1.1</b> Possession Sequences</a></li>
<li class="chapter" data-level="3.1.2" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#metrics-of-pace"><i class="fa fa-check"></i><b>3.1.2</b> Metrics of Pace</a></li>
<li class="chapter" data-level="3.1.3" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#spatial-polygrid-analysis"><i class="fa fa-check"></i><b>3.1.3</b> Spatial Polygrid Analysis</a></li>
<li class="chapter" data-level="3.1.4" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#zonal-analysis"><i class="fa fa-check"></i><b>3.1.4</b> Zonal Analysis</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#results"><i class="fa fa-check"></i><b>3.2</b> Results</a><ul>
<li class="chapter" data-level="3.2.1" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#epl-pace-polygrid"><i class="fa fa-check"></i><b>3.2.1</b> EPL Pace (Polygrid)</a></li>
<li class="chapter" data-level="3.2.2" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#epl-pace-zonal"><i class="fa fa-check"></i><b>3.2.2</b> EPL Pace (Zonal)</a></li>
<li class="chapter" data-level="3.2.3" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#pace-across-leagues"><i class="fa fa-check"></i><b>3.2.3</b> Pace Across Leagues</a></li>
<li class="chapter" data-level="3.2.4" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#epl-team-level-pace-polygrid"><i class="fa fa-check"></i><b>3.2.4</b> EPL Team-level Pace (Polygrid)</a></li>
<li class="chapter" data-level="3.2.5" data-path="pace-of-play-metrics.html"><a href="pace-of-play-metrics.html#epl-team-level-pace-zonal"><i class="fa fa-check"></i><b>3.2.5</b> EPL Team-level Pace (Zonal)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modeling.html"><a href="modeling.html"><i class="fa fa-check"></i><b>4</b> Modeling</a><ul>
<li class="chapter" data-level="4.1" data-path="modeling.html"><a href="modeling.html#variable-and-model-selection"><i class="fa fa-check"></i><b>4.1</b> Variable and Model Selection</a></li>
<li class="chapter" data-level="4.2" data-path="modeling.html"><a href="modeling.html#hierarchical-logistic-model"><i class="fa fa-check"></i><b>4.2</b> Hierarchical Logistic Model</a></li>
<li class="chapter" data-level="4.3" data-path="modeling.html"><a href="modeling.html#multinomial-logistic-model"><i class="fa fa-check"></i><b>4.3</b> Multinomial Logistic Model</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>5</b> Conclusion</a><ul>
<li class="chapter" data-level="5.1" data-path="conclusion.html"><a href="conclusion.html#future-steps"><i class="fa fa-check"></i><b>5.1</b> Future Steps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>6</b> Appendix</a><ul>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#event-names"><i class="fa fa-check"></i>Event Names</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#minimum-number-of-events-per-possession"><i class="fa fa-check"></i>Minimum Number of Events per Possession</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#average-distance-per-pass"><i class="fa fa-check"></i>Average Distance per Pass</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#epl-team-level-pace-polygrid-1"><i class="fa fa-check"></i>EPL Team-level Pace (Polygrid)</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#hierarchical-logistic-model-diagnostics"><i class="fa fa-check"></i>Hierarchical Logistic Model Diagnostics</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html#multinomial-logistic-model-diagnostics"><i class="fa fa-check"></i>Multinomial Logistic Model Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://stat.duke.edu/" target="blank">Duke University<br>Department of Statistical Science</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analyzing Pace-of-Play in Soccer using Spatio-Temporal Event Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="modeling" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Modeling</h1>
<div id="variable-and-model-selection" class="section level2">
<h2><span class="header-section-number">4.1</span> Variable and Model Selection</h2>
<p>After creating the pace-of-play metrics, we wanted to evaluate their effectiveness when used as variables in models that predict the outcome of a game. We implemented models with and without the pace metrics to determine if the models with the pace metrics achieve a higher accuracy. We only considered pre-game, historical variables that can be gathered before each game is played and did not include traditional post-game performance-based features, such as the number of shots or corners taken. Even though we incorporate a pace metric from the same game as a variable, we anticipate that they can be made into pre-game variables by substituting our pace metrics with historical measurements of pace.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:vars-table">Table 4.1: </span>Description of modeling variables.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:center;">
Description
</th>
<th style="text-align:center;">
Values
</th>
</tr>
</thead>
<tbody>
<tr grouplength="1">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Response</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left:  2em;" indentlevel="1">
FTR
</td>
<td style="text-align:center;">
Outcome of a game with respect to home team
</td>
<td style="text-align:center;">
-1 (Loss), 0 (Draw), 1 (Win)
</td>
</tr>
<tr grouplength="4">
<td colspan="3" style="border-bottom: 1px solid;">
<strong>Predictors</strong>
</td>
</tr>
<tr>
<td style="text-align:left; padding-left:  2em;" indentlevel="1">
Unbeaten
</td>
<td style="text-align:center;">
Current home unbeaten streak (win/draw)
</td>
<td style="text-align:center;">
0 to 19
</td>
</tr>
<tr>
<td style="text-align:left; padding-left:  2em;" indentlevel="1">
Derby
</td>
<td style="text-align:center;">
Indicates if game is a derby
</td>
<td style="text-align:center;">
0 (No), 1 (Yes)
</td>
</tr>
<tr>
<td style="text-align:left; padding-left:  2em;" indentlevel="1">
League
</td>
<td style="text-align:center;">
League that game takes place in
</td>
<td style="text-align:center;">
EPL, Ligue 1, Bundesliga, Serie A, La Liga
</td>
</tr>
<tr>
<td style="text-align:left; padding-left:  2em;" indentlevel="1">
Team
</td>
<td style="text-align:center;">
Name of the home team
</td>
<td style="text-align:center;">
Liverpool, Barcelona, etc.
</td>
</tr>
</tbody>
</table>
<p>For each of the 1826 games, the response variable, <em>FTR</em>, describes the outcome with respect to the home team. A <em>FTR</em> of 1 indicates that the home team won while -1 indicates the away team won. <em>Unbeaten</em> is the home team’s current unbeaten streak leading up to a game. The streak resets to 0 when a team loses at home. For the first home game of the season, a team’s unbeaten streak from the 2016-17 season is used. For example, Manchester City went unbeaten in their last 12 home games in the 2016-17 season, so their <em>Unbeaten</em> for their first home game is 12. For the 14 newly promoted teams, their <em>Unbeaten</em> for their first home game is 0. This is because they played in a lower division, so their home unbeaten streak is not comparable to that of a team that played in the first division. <em>Derby</em> is an indicator variable, where 1 indicates whether or not a game is a derby game. A game is marked as a derby game if the two teams are located in the same city (Manchester City vs. Manchester United) or if there is a historical rivalry (El Clásico). <em>League</em> specifies which of the five leagues the game takes place in and <em>Team</em> provides the name of the home team.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:pace-vars-table">Table 4.2: </span>Description of pace variables.
</caption>
<thead>
<tr>
<th style="text-align:left;">
Variable
</th>
<th style="text-align:center;">
Description
</th>
<th style="text-align:center;">
Values
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 13em; ">
<span class="math inline">\(\Delta_{ij}^{AZ}\)</span>
</td>
<td style="text-align:center;width: 27.5em; ">
Sum of the differences in total velocity for all zones (1-8) for home team <span class="math inline">\(i\)</span> and away team <span class="math inline">\(j\)</span>
</td>
<td style="text-align:center;">
-88.93 to 67.72 (m/s)
</td>
</tr>
<tr>
<td style="text-align:left;width: 13em; ">
<span class="math inline">\(\Delta_{ij}^{OZ}\)</span>
</td>
<td style="text-align:center;width: 27.5em; ">
Sum of the differences in total velocity for all zones in offensive half (5-8) for home team <span class="math inline">\(i\)</span> and away team <span class="math inline">\(j\)</span>
</td>
<td style="text-align:center;">
-80.68 to 45.55 (m/s)
</td>
</tr>
<tr>
<td style="text-align:left;width: 13em; ">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:center;width: 27.5em; ">
Sum of the differences in total velocity for zones 5,7,8 for home team <span class="math inline">\(i\)</span> and away team <span class="math inline">\(j\)</span>
</td>
<td style="text-align:center;">
-79.1 to 39.74 (m/s)
</td>
</tr>
</tbody>
</table>
<p>For each game, we conducted a <a href="pace-of-play-metrics.html#zonal-analysis">zonal analysis</a> of the <span class="math inline">\(V_{T}\)</span> for the home and away teams. We took the median of the median velocities of the 5x5 polygrids to determine the aggregate speeds for each zone instead of the mean of the medians. Lower tier teams have a smaller number of recorded events per game and are more susceptible to outliers in both the polygrid and zonal analyses. Thus, using the median of the median velocities makes these zonal speeds more resistant to outliers. Then we calculated the difference (home - away) in <span class="math inline">\(V_{T}\)</span> for each of the 8 zones. Let <span class="math inline">\(i \in (1, 2, \dots, 98)\)</span> represent the home team and <span class="math inline">\(j \in (1, 2, \dots, 38)\)</span> (<span class="math inline">\((1, 2, \dots, 34)\)</span> for teams in the Bundesliga) be the <span class="math inline">\(j^{th}\)</span> game team <span class="math inline">\(i\)</span> plays during the season. Then <span class="math inline">\(\Delta_{ij}^{AZ}\)</span> is the sum of the differences for all 8 zones, <span class="math inline">\(\Delta_{ij}^{OZ}\)</span> is the sum of the differences for the four zones in the offensive half (5-8) and <span class="math inline">\(\Delta_{ij}^{FZ}\)</span> is the sum of the differences in the flank zones (5, 7, 8).</p>
<p>To evaluate the models, we first split the data into a train and test set. The test data, which is 21.5% of the full data, includes 2 home and 2 away games for each of the 98 teams, for a total of 392 games. We perform 4-fold cross validation on the training data and lastly assess model performance by predicting on the testing data. We propose two different types of models - the first is a hierarchical logistic regression model that predicts between wins and non-wins (draws and losses) while the second is a multinomial logistic regression model that predicts on all three potential match outcomes. Draws and losses are the baseline category of the response variable in the hierarchical logistic models and losses are the baseline in the multinomial logistic models. These models were preferred over other classification algorithms since we are concerned with both predictive power and interpretability.</p>
<p>For both sets of models, we first constructed a baseline model that only uses the predictors mentioned in Table <a href="modeling.html#tab:vars-table">4.1</a>. We then added one of the pace variables from Table <a href="modeling.html#tab:pace-vars-table">4.2</a> to determine if the addition of a pace variable improves the model’s accuracy. Only one pace variable can be added to the model since they are all highly correlated. Interaction effects between the baseline predictors and quadratic terms for <em>Unbeaten</em> and the pace variables were also considered, but none of these modifications significantly improved the predictive power of any model. We used accuracy and AUC as evaluation metrics for the hierarchical logistic regression and accuracy and True Positive Rate (TPR) for the multinomial logistic regression. Model assumptions and diagnostics, such as binned residual plots, are discussed in the <a href="appendix.html#hierarchical-logistic-model-diagnostics">Appendix</a>.</p>
</div>
<div id="hierarchical-logistic-model" class="section level2">
<h2><span class="header-section-number">4.2</span> Hierarchical Logistic Model</h2>
<p>The baseline hierarchical logistic model (without any pace variables) is as follows:</p>
<p><span class="math display">\[ 
\begin{aligned}
Y_{ij} \sim Bernoulli(&amp;\pi_{ij}) \\
log(\frac{\pi_{ij}}{1-\pi_{ij}}) = \beta_{0} + \beta_{1} * Unbeaten_i \ + 
\beta_{2} *  I(&amp;Derby_{ij}=Yes) + \alpha_{i}  &amp;&amp; (1.1)\\ 
\alpha_i \sim N(0,\tau^2) 
\end{aligned}
\]</span></p>
<p>The modified hierarchical logistic model (with the pace variable) is as follows:</p>
<p><span class="math display">\[ 
\begin{aligned}
Y_{ij} \sim Bernoulli(&amp;\pi_{ij}) \\
log(\frac{\pi_{ij}}{1-\pi_{ij}}) = \beta_{0} + \beta_{1} * Unbeaten_i \ + 
\beta_{2} *  I(Der&amp;by_{ij}=Yes) +\beta_3 * \Delta_{ij}^{FZ} + \alpha_{i} &amp; (1.2)\\ 
\alpha_i \sim N(0,\tau^2) 
\end{aligned}
\]</span>
Recall that the baseline of the response variable is draws and losses. <span class="math inline">\(Y_{ij}\)</span> is the outcome (win vs. draw/loss) of the game and <span class="math inline">\(\pi_{ij}\)</span> is the probability that home team <span class="math inline">\(i\)</span> wins the game. <span class="math inline">\(\alpha_i\)</span> represents the random intercept term for team <span class="math inline">\(i\)</span>. We do not include a random intercept for <em>League</em>, as most of the variability between leagues is already explained by the variability between teams. The only difference between models 1.1 and 1.2 is the addition of the variable <span class="math inline">\(\Delta_{ij}^{FZ}\)</span> in 1.2.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-7">Table 4.3: </span>Hierarchical logistic model results with 4-fold cross validation.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Train Data
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Test Data
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
Model
</th>
<th style="text-align:center;">
Mean Accuracy
</th>
<th style="text-align:center;">
Mean AUC
</th>
<th style="text-align:center;">
Accuracy
</th>
<th style="text-align:center;">
AUC
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Baseline
</td>
<td style="text-align:center;">
58.29%
</td>
<td style="text-align:center;">
56.53
</td>
<td style="text-align:center;">
63.52%
</td>
<td style="text-align:center;">
60.57
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:center;">
59.91%
</td>
<td style="text-align:center;">
58.52
</td>
<td style="text-align:center;">
64.29%
</td>
<td style="text-align:center;">
61.68
</td>
</tr>
</tbody>
</table>
<p>The baseline hierarchical logistic model reports an accuracy of 63.52% and AUC of 60.57 on the test data while the best performing pace model, the one with <span class="math inline">\(\Delta_{ij}^{FZ}\)</span>, reports a slightly higher accuracy of 64.29% and AUC of 61.68. This suggests that the addition of a pace variable does not significantly improve the predictive power of the model on the test set. The results for the other two pace models can be found in Appendix Table <a href="appendix.html#tab:hier-log-output-appendix">6.2</a>.</p>
<p>We expect the pace model with <span class="math inline">\(\Delta_{ij}^{AZ}\)</span> to have the lowest performance out of the three pace models. These pace variables assume that pace across the pitch is weighted evenly. Even though pace varies in the defensive half of the pitch, these differences are not necessarily indicative of a team’s scoring capabilities. Variation in pace in the offensive half is more indicative of a team’s attacking strength, which is more directly related to the outcome of a match.</p>
<table class="table" style="font-size: 13.5px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:hier-log-model-coef">Table 4.4: </span>Coefficients obtained from models 1.1 and 1.2.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Baseline Model
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Pace Model
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
Predictor
</th>
<th style="text-align:center;">
Log Odds Ratio
</th>
<th style="text-align:center;">
Odds Ratio
</th>
<th style="text-align:center;">
p-value
</th>
<th style="text-align:center;">
Log Odds Ratio
</th>
<th style="text-align:center;">
Odds Ratio
</th>
<th style="text-align:center;">
p-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
(Intercept)
</td>
<td style="text-align:center;">
-0.24
</td>
<td style="text-align:center;">
0.78 (0.67, 0.92)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
<td style="text-align:center;">
-0.29
</td>
<td style="text-align:center;">
0.75 (0.64, 0.88)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
Unbeaten
</td>
<td style="text-align:center;">
0.03
</td>
<td style="text-align:center;">
1.03 (1, 1.07)
</td>
<td style="text-align:center;">
<span style="     ">0.06</span>
</td>
<td style="text-align:center;">
0.04
</td>
<td style="text-align:center;">
1.04 (1.01, 1.08)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">0.02</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
Derby
</td>
<td style="text-align:center;">
-0.9
</td>
<td style="text-align:center;">
0.41 (0.24, 0.69)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
<td style="text-align:center;">
-0.80
</td>
<td style="text-align:center;">
0.45 (0.27, 0.76)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
</td>
<td style="text-align:center;">
-0.05
</td>
<td style="text-align:center;">
0.95 (0.94, 0.97)
</td>
<td style="text-align:center;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
</tbody>
</table>
<p>Table <a href="modeling.html#tab:hier-log-model-coef">4.4</a> displays the log odds and odds ratios for all the variables used in the baseline and pace models, respectively. All the coefficients, except for <em>Unbeaten</em> in the baseline model, are statistically significant. We note that the log odds for <span class="math inline">\(\Delta_{ij}^{FZ}\)</span> is negative and statistically significant. This indicates that as the home team’s <span class="math inline">\(V_T\)</span> in the flank zones increases by one meter per second, the odds of the home team winning the match is expected to multiply by 0.95, holding all else constant. This reflects the results from Figures <a href="pace-of-play-metrics.html#fig:epl-attacking-polygrids">3.5</a> and <a href="appendix.html#fig:epl-attacking-polygrids-appendix">6.3</a>, which showed that lower ranked teams, and thus teams that are expected to have a lower chance of winning a match, generally have a higher <span class="math inline">\(V_T\)</span>.</p>
</div>
<div id="multinomial-logistic-model" class="section level2">
<h2><span class="header-section-number">4.3</span> Multinomial Logistic Model</h2>
<p>The baseline multinomial logistic model (without any pace variables) is as follows:</p>
<p><span class="math display">\[
\begin{aligned}
P(Y_{ijk} = k) = \ &amp;\pi_{ijk}  \\
log(\frac{\pi_{ijk}}{\pi_{ij1}}) = \beta_{0k} + \beta_{1k} * Unbeaten + \ \beta_{2k}* I&amp;(Derby_{ij}=Yes)  + \ &amp; (2.1)\\
\sum_{T = 2}^{98}\beta_{3kt}*I(Tea&amp;m_{i}=t) &amp; \\ 
k \in  (2, 3)
\end{aligned}
\]</span></p>
<p>The modified multinomial logistic model (with the pace variable) is as follows:</p>
<p><span class="math display">\[
\begin{aligned}
P(Y_{ijk} = k) =&amp; \ \pi_{ijk}  \\
log(\frac{\pi_{ijk}}{\pi_{ij1}}) = \beta_{0k} + \beta_{1k} * Unbeaten + \ \beta_{2k}* I&amp;(Derby_{ij}=Yes)  + \ &amp; (2.2)\\
\sum_{T = 2}^{98}\beta_{3kt}*I(Team_{i}=t&amp;) + \beta_{4k} * \Delta_{ij}^{FZ}&amp; \\ 
k \in  (2, 3)
\end{aligned}
\]</span></p>
<p>Recall that the baseline of the response variable, <span class="math inline">\(k=1\)</span>, is a loss. <span class="math inline">\(\pi_{ijk}\)</span> is the probability that the game ends in a draw when <span class="math inline">\(k=2\)</span> and a win when <span class="math inline">\(k=3\)</span>. For the term <em>Team</em>, <span class="math inline">\(t=1\)</span> is the baseline, which is Manchester City. The only difference between models 2.1 and 2.2 is the addition of the variable <span class="math inline">\(\Delta_{ij}^{FZ}\)</span> in 2.2.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-8">Table 4.5: </span>Multinomial logistic model results with 4-fold cross validation.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Train Data
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Test Data
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
Model
</th>
<th style="text-align:center;">
Mean Accuracy
</th>
<th style="text-align:center;">
Accuracy
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Baseline
</td>
<td style="text-align:center;">
45.27%
</td>
<td style="text-align:center;">
45.15%
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:center;">
45.23%
</td>
<td style="text-align:center;">
46.68%
</td>
</tr>
</tbody>
</table>
<p>The baseline multinomial model reports an accuracy of 45.15% on the test data while the best performing pace model, the one with <span class="math inline">\(\Delta_{ij}^{FZ}\)</span>, reports a slightly higher accuracy of 46.68%. This modified model, which is the best of the three pace models, actually performs slightly worse on the train set than the baseline model. Once again, we see that the addition of a pace variable in the model does not significantly improve the predictive power of the model. The results for the other two pace models can be found in Appendix Table <a href="appendix.html#tab:multinom-output-appendix">6.5</a>.</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:multinom-tprs">Table 4.6: </span>True Positive Rates from the baseline and modified multinomial models for each match outcome.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Train Data
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Test Data
</div>
</th>
</tr>
<tr>
<th style="text-align:center;">
Model
</th>
<th style="text-align:center;">
Mean TPR (win)
</th>
<th style="text-align:center;">
Mean TPR (draw)
</th>
<th style="text-align:center;">
Mean TPR (loss)
</th>
<th style="text-align:center;">
TPR (win)
</th>
<th style="text-align:center;">
TPR (draw)
</th>
<th style="text-align:center;">
TPR (loss)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Baseline
</td>
<td style="text-align:center;">
65.1%
</td>
<td style="text-align:center;">
16.55%
</td>
<td style="text-align:center;">
38.08%
</td>
<td style="text-align:center;">
69.64%
</td>
<td style="text-align:center;">
11.65%
</td>
<td style="text-align:center;">
39.67%
</td>
</tr>
<tr>
<td style="text-align:center;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:center;">
64.61%
</td>
<td style="text-align:center;">
16.85%
</td>
<td style="text-align:center;">
38.38%
</td>
<td style="text-align:center;">
67.86%
</td>
<td style="text-align:center;">
13.59%
</td>
<td style="text-align:center;">
45.45%
</td>
</tr>
</tbody>
</table>
<p>Table <a href="modeling.html#tab:multinom-tprs">4.6</a> indicates that the models predict wins decently well but struggle to predict draws and losses. On paper, one team is typically stronger than the other and thus more likely to win. Predicting a draw or loss requires one team to either perform better or worse than they normally do, which can be unexpected and therefore more unpredictable. Draws are considerably harder to predict than losses because this requires that both teams also score the same number of goals.</p>
<table class="table" style="font-size: 13.5px; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:multinom-log-model-coef">Table 4.7: </span>Coefficients obtained from models 2.1 and 2.2.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="2">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Baseline Model Odds Ratio
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Pace Model Odds Ratio
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Predictor
</th>
<th style="text-align:left;">
Response
</th>
<th style="text-align:left;">
Log Odds
</th>
<th style="text-align:left;">
Odds Ratio
</th>
<th style="text-align:left;">
p-value
</th>
<th style="text-align:right;">
Log Odds
</th>
<th style="text-align:left;">
Odds Ratio
</th>
<th style="text-align:left;">
p-value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:left;">
FTR = draw
</td>
<td style="text-align:left;">
2.09
</td>
<td style="text-align:left;">
8.07 (0.66, 98.31)
</td>
<td style="text-align:left;">
<span style="     ">0.1</span>
</td>
<td style="text-align:right;">
1.69
</td>
<td style="text-align:left;">
5.41 (0.44, 66)
</td>
<td style="text-align:left;">
<span style="     ">0.19</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Unbeaten
</td>
<td style="text-align:left;">
FTR = draw
</td>
<td style="text-align:left;">
-0.16
</td>
<td style="text-align:left;">
0.85 (0.8, 0.91)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
<td style="text-align:right;">
-0.15
</td>
<td style="text-align:left;">
0.86 (0.8, 0.91)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Derby
</td>
<td style="text-align:left;">
FTR = draw
</td>
<td style="text-align:left;">
0.16
</td>
<td style="text-align:left;">
1.18 (0.6, 2.31)
</td>
<td style="text-align:left;">
<span style="     ">0.64</span>
</td>
<td style="text-align:right;">
0.22
</td>
<td style="text-align:left;">
1.25 (0.63, 2.45)
</td>
<td style="text-align:left;">
<span style="     ">0.52</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:left;">
FTR = draw
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
-0.05
</td>
<td style="text-align:left;">
0.95 (0.93, 0.97)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:left;">
FTR = win
</td>
<td style="text-align:left;">
4.16
</td>
<td style="text-align:left;">
64.2 (7.46, 552.51)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
<td style="text-align:right;">
3.68
</td>
<td style="text-align:left;">
39.47 (4.58, 339.97)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Unbeaten
</td>
<td style="text-align:left;">
FTR = win
</td>
<td style="text-align:left;">
-0.14
</td>
<td style="text-align:left;">
0.86 (0.82, 0.92)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
<td style="text-align:right;">
-0.14
</td>
<td style="text-align:left;">
0.87 (0.82, 0.92)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Derby
</td>
<td style="text-align:left;">
FTR = win
</td>
<td style="text-align:left;">
-1.15
</td>
<td style="text-align:left;">
0.32 (0.16, 0.63)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
<td style="text-align:right;">
-1.05
</td>
<td style="text-align:left;">
0.35 (0.18, 0.69)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.01</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span class="math inline">\(\Delta_{ij}^{FZ}\)</span>
</td>
<td style="text-align:left;">
FTR = win
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:right;">
-0.06
</td>
<td style="text-align:left;">
0.94 (0.92, 0.96)
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">&lt; 0.001</span>
</td>
</tr>
</tbody>
</table>
<p>Table <a href="modeling.html#tab:multinom-log-model-coef">4.7</a> displays the the log odds and odds ratios for all the variables used in the baseline and pace variable models, respectively. The log odds and odds ratios for the <em>Team</em> variable for both models can be found in Appendix Tables <a href="appendix.html#tab:mlm-home-coef-baseline">6.6</a> and <a href="appendix.html#tab:mlm-home-coef-pace">6.7</a>. Once again, we note that both the log odds for <span class="math inline">\(\Delta_{ij}^{FZ}\)</span> are negative and statistically significant. This indicates that as <span class="math inline">\(V_T\)</span> in the flank zones increases by one meter per second, the odds of the home team drawing a match versus losing are expected to multiply by 0.95 and the odds of the home team winning a match versus losing are expected to multiply by 0.94, holding all else constant. Both draws and wins are better outcomes than a loss, so this matches the results from Figures <a href="pace-of-play-metrics.html#fig:epl-attacking-polygrids">3.5</a>, <a href="appendix.html#fig:epl-attacking-polygrids-appendix">6.3</a> and Table <a href="modeling.html#tab:hier-log-model-coef">4.4</a>. Teams with higher <span class="math inline">\(V_T\)</span> are generally weaker and thus more likely to lose a match rather than draw or win a match.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pace-of-play-metrics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"], ["thesis.epub", "EPUB"], ["thesis.docx", "Word"]],
"toc": {
"collapse": "subsection"
},
"toc_depth": 2
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
